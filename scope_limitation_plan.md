### Detailed Plan to Resolve CS0436 Warnings

**Problem:** `CS0436` warnings occur because types like `LogLevel`, `ObservatorTraceAttribute`, and `ObservatorInfrastructure` are being generated by `Observator.Generator` in `TestApp`'s `obj` directory, while also being imported from `TestLib`. This creates a type conflict.

**Root Cause:** The `Observator.Generator` is generating common infrastructure types directly into the consuming projects (`TestApp` in this case), even though these types are already defined or referenced from `TestLib`.

**Proposed Solution:** Centralize the definition of common infrastructure types in `TestLib`. The `Observator.Generator` will then *reference* these types instead of generating them repeatedly.

#### Step-by-Step Plan:

1.  **Identify Common Infrastructure Types:**
    *   `LogLevel` (enum)
    *   `ObservatorTraceAttribute` (attribute class)
    *   `ObservatorInfrastructure` (class)

2.  **Confirm `TestLib` as the Shared Project:**
    *   Based on the warnings, `TestLib` already contains or imports these types. I will assume `TestLib` is the intended shared location for these common types. If this assumption is incorrect, please let me know, and I will adjust the plan to create a new shared project.

3.  **Move Type Definitions to `TestLib`:**
    *   The definitions for `LogLevel`, `ObservatorTraceAttribute`, and `ObservatorInfrastructure` need to be explicitly defined within `TestLib` (if they aren't already). These definitions must be `public`.
    *   I will need to read `src/Observator.Generator/InfrastructureGenerator.cs` to understand the current generation logic for these types.

4.  **Modify `Observator.Generator` to Reference, Not Generate:**
    *   **`src/Observator.Generator/InfrastructureGenerator.cs`**:
        *   Remove the code responsible for generating the source code for `LogLevel`, `ObservatorTraceAttribute`, and `ObservatorInfrastructure`.
        *   Modify the generator to ensure that any generated code that uses these types refers to them using their fully qualified names (e.g., `TestLib.LogLevel`, `TestLib.ObservatorTraceAttribute`, `TestLib.ObservatorInfrastructure`) or by adding appropriate `using TestLib;` directives.

5.  **Verify and Test:**
    *   After implementing the changes, I will ask you to clean and rebuild the solution (`dotnet clean observator.sln` and `dotnet build observator.sln`).
    *   We will then confirm that all `CS0436` warnings are resolved and that the application still functions as expected.

#### Conceptual Flow Diagram:

```mermaid
graph TD
    A[Observator.Generator] --> B{Generates Code for TestApp};
    B --> C[TestApp (Generated Code)];
    D[TestLib] --> E[TestApp (References TestLib)];

    subgraph Current State (Conflict)
        C -- Defines LogLevel, ObservatorTraceAttribute, ObservatorInfrastructure --> F[Conflict with D];
        D -- Defines LogLevel, ObservatorTraceAttribute, ObservatorInfrastructure --> F;
    end

    subgraph Proposed State (Resolution)
        D_new[TestLib (Centralized Types)] -- Defines LogLevel, ObservatorTraceAttribute, ObservatorInfrastructure --> E_new[TestApp (References TestLib)];
        A_new[Observator.Generator] --> B_new{Generates Code for TestApp};
        B_new --> C_new[TestApp (Generated Code)];
        C_new -- References Types from TestLib --> D_new;
    end

    style F fill:#f9f,stroke:#333,stroke-width:2px
    style D_new fill:#bbf,stroke:#333,stroke-width:2px